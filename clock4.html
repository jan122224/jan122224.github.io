<!DOCTYPE html>
<html lang="javascript">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多角形時計</title>
</head>
<body>
    <p id="t"></p>
    <script src="https://cdn.jsdelivr.net/npm/p5@0.10.2/lib/p5.js"></script>
    <script>
        
        
        let Co = 0;

        function setup() {
            createCanvas(600, 600);
            
        };
        
        function draw() {
            background('black');
            HOUR();
            MINUTE();
            SECOND();
            MnD();
        };
        function MnD() {
            let cx = width / 2;
            let cy = height / 2;
            let Mo = month();
            let Da = day();
            if(Mo < 10) {
                Mo = '0' + Mo;
            };
            if(Da < 10) {
                Da = '0' + Da;
            };
            
            fill('white');
            text(Mo + '/' + Da, cx - 15, cy + 5);
            textSize(10);

        };
        function HOUR() {
        
            if (Co == 7200) {
                Co = 0
            };

            let n = 3 + hour() / 12;
            let cx = width / 2;
            let cy = height / 2;
            let d = 100;
            
            for (let i = 0; i <= 180; i++) {
                stroke('white');
                strokeWeight(1);
                line(cx + d * cos(TWO_PI * (i / n  + Co / 7200 - 0.25)),
                    cy + d * sin(TWO_PI * (i / n + Co / 7200 - 0.25)),
                    cx + d * cos(TWO_PI * ((i + 1) / n + Co / 7200 - 0.25)),
                    cy + d * sin(TWO_PI * ((i + 1) / n + Co / 7200 - 0.25)));
            };

            fill('white');
            text(hour(), cx - 10 + (d + 10) * cos(TWO_PI * hour() / 12 - TWO_PI / 4), cy + (d + 10) * sin(TWO_PI * hour() / 12 - TWO_PI / 4));
            textSize(10);

            Co ++;
        };

        function MINUTE() {
        
            if (Co == 7200) {
                Co = 0
            };

            let n = 4 + minute() / 30;
            let cx = width / 2;
            let cy = height / 2;
            let d = 180;
            
            for (let i = 0; i <= 180; i++) {
                stroke('white');
                strokeWeight(1);
                line(cx + d * cos(TWO_PI * (i / n  - Co / 4800 - 0.25)),
                    cy + d * sin(TWO_PI * (i / n - Co / 4800 - 0.25)),
                    cx + d * cos(TWO_PI * ((i + 1) / n - Co / 4800 - 0.25)),
                    cy + d * sin(TWO_PI * ((i + 1) / n - Co / 4800 - 0.25)));
            };

            fill('white');
            text(minute(), cx -10 + (d + 10) * cos(TWO_PI * minute() / 60 - TWO_PI / 4), cy + (d + 10) * sin(TWO_PI * minute() / 60 - TWO_PI / 4));
            textSize(10);

            Co ++;
        };
        
        function SECOND() {
        
            if (Co == 7200) {
                Co = 0
            };

            let n = 5 + second() / 30;
            let cx = width / 2;
            let cy = height / 2;
            let d = 250;
    
            for (let i = 0; i <= 180; i++) {
                stroke('white');
                strokeWeight(1);
                line(cx + d * cos(TWO_PI * (i / n + Co / 3600 - 0.25)),
                    cy + d * sin(TWO_PI * (i / n + Co / 3600 - 0.25)),
                    cx + d * cos(TWO_PI * ((i + 1) / n + Co / 3600 - 0.25)),
                    cy + d * sin(TWO_PI * ((i + 1) / n + Co / 3600 - 0.25)));
            };

            fill('white');
            text(second(), cx - 10 + (d + 20) * cos(TWO_PI * second() / 60 - TWO_PI / 4), cy + (d + 20) * sin(TWO_PI * second() / 60 - TWO_PI / 4));
            textSize(10);

            Co ++;
        };

    </script>
</body>

</html>
